<!DOCTYPE html>
<html>
<head>
    <title>èŠ‚ç‚¹æµ‹è¯•å™¨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial; padding: 15px; background: #f0f0f0; }
        textarea { width: 95%; height: 150px; padding: 10px; font-size: 14px; }
        button { background: blue; color: white; padding: 12px; font-size: 16px; border: none; border-radius: 5px; margin: 5px; }
        .result { background: white; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .good { border-left: 5px solid green; }
        .bad { border-left: 5px solid red; }
    </style>
</head>
<body>
    <h2>ğŸ” èŠ‚ç‚¹æµ‹è¯•å™¨</h2>
    
    <p><strong>æŠŠ10ä¸ªèŠ‚ç‚¹åœ°å€ç²˜è´´åœ¨è¿™é‡Œï¼š</strong></p>
    <textarea id="nodes">https://jsonplaceholder.typicode.com/posts/1
https://api.publicapis.org/entries
https://catfact.ninja/fact
åœ¨è¿™é‡Œç²˜è´´ä½ çš„10ä¸ªèŠ‚ç‚¹åœ°å€
æ¯è¡Œä¸€ä¸ª</textarea>
    
    <button onclick="testAll()">ğŸš€ å¼€å§‹æµ‹è¯•</button>
    <button onclick="clearResults()">ğŸ—‘ï¸ æ¸…ç©ºç»“æœ</button>
    
    <div id="progress"></div>
    <div id="results"></div>

    <script>
        async function testAll() {
            const nodes = document.getElementById('nodes').value.split('\n');
            const resultsDiv = document.getElementById('results');
            const progressDiv = document.getElementById('progress');
            
            resultsDiv.innerHTML = '';
            progressDiv.innerHTML = 'ğŸ”„ å¼€å§‹æµ‹è¯•...';
            
            let goodCount = 0;
            let badCount = 0;
            
            for (let i = 0; i < nodes.length; i++) {
                const url = nodes[i].trim();
                if (!url) continue;
                
                progressDiv.innerHTML = `æµ‹è¯•ä¸­... (${i + 1}/${nodes.length})`;
                
                const result = await testNode(url, i + 1);
                if (result.success) goodCount++;
                else badCount++;
                
                displayResult(result);
            }
            
            progressDiv.innerHTML = `âœ… æµ‹è¯•å®Œæˆï¼æˆåŠŸ: ${goodCount}ä¸ªï¼Œå¤±è´¥: ${badCount}ä¸ª`;
        }
        
        async function testNode(url, number) {
            try {
                const start = Date.now();
                const response = await fetch(url);
                const time = Date.now() - start;
                
                return {
                    number,
                    url,
                    success: true,
                    time: time,
                    status: response.status
                };
            } catch (error) {
                return {
                    number,
                    url, 
                    success: false,
                    error: error.message
                };
            }
        }
        
        function displayResult(result) {
            const resultsDiv = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `result ${result.success ? 'good' : 'bad'}`;
            
            if (result.success) {
                div.innerHTML = `
                    <strong>âœ… èŠ‚ç‚¹ ${result.number}</strong><br>
                    â±ï¸ ${result.time}æ¯«ç§’<br>
                    ğŸ“ ${result.url}
                `;
            } else {
                div.innerHTML = `
                    <strong>âŒ èŠ‚ç‚¹ ${result.number}</strong><br>
                    ğŸ”§ ${result.error}<br>
                    ğŸ“ ${result.url}
                `;
            }
            
            resultsDiv.appendChild(div);
        }
        
        function clearResults() {
            document.getElementById('results').innerHTML = '';
            document.getElementById('progress').innerHTML = '';
        }
    </script>
</body>
</html>
